webpackJsonp([1],{BMkL:function(t,n){},NHnr:function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i=e("7+uW"),r={render:function(){var t=this.$createElement,n=this._self._c||t;return n("div",{attrs:{id:"app"}},[n("router-view")],1)},staticRenderFns:[]};var s=e("VU/8")({name:"App"},r,!1,function(t){e("sbcC")},null,null).exports,a=e("/ocq"),o={name:"grid",props:{namespace:String,disabled:Boolean},data:function(){return{}},methods:{hit:function(t){this.$emit("hit",{namespace:this.namespace,cell:t})}},computed:{shipsAvailable:function(){return this.$store.getters[this.namespace+"/shipsAvailable"]},rows:function(){return this.$store.state[this.namespace].elements}}},c={render:function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{class:{disabled:t.disabled}},[e("h3",[t._v(" Ships available "+t._s(t.shipsAvailable)+" ")]),t._v(" "),e("div",{staticClass:"grid"},t._l(t.rows,function(n){return e("div",t._l(n,function(n){return e("div",{key:n.x+n.y,class:{cell:!0,owned:!!n.ship,marked:n.hit},on:{click:function(e){t.hit(n)}}},[t._v("\n            ~\n          ")])}))}))])},staticRenderFns:[]};var u={name:"home-page",components:{Grid:e("VU/8")(o,c,!1,function(t){e("p9Ff")},null,null).exports},data:function(){return{}},methods:{hit:function(t){this.$store.dispatch("hit",t)},restart:function(){this.$store.dispatch("restart")}},computed:{isGameEnded:function(){var t=this.$store.getters;return 0===t["grid/shipsAvailable"]||0===t["opponentGrid/shipsAvailable"]}}},p={render:function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"container"},[t.isGameEnded?t._e():[e("grid",{attrs:{namespace:"grid",disabled:"grid"!==this.$store.state.currentTurn},on:{hit:t.hit}}),t._v(" "),e("grid",{attrs:{namespace:"opponentGrid",disabled:"opponentGrid"!==this.$store.state.currentTurn},on:{hit:t.hit}})],t._v(" "),t.isGameEnded?e("div",[t._v("\n      Game Over\n      "),e("button",{on:{click:t.restart}},[t._v("\n        restart\n      ")])]):t._e()],2)},staticRenderFns:[]};var d=e("VU/8")(u,p,!1,function(t){e("BMkL")},"data-v-55940d40",null).exports;i.a.use(a.a);var h=new a.a({routes:[{path:"/",name:"home-page",component:d}]}),f=e("fZjL"),l=e.n(f),m=e("NYxO"),v=e("M4fF"),g=e.n(v),y=e("Dd8w"),x=e.n(y);var _=[{x:1,y:1},{x:1,y:2},{x:1,y:3},{x:2,y:3}],b=[{x:7,y:7},{x:7,y:8},{x:7,y:9}],A=[{x:9,y:4}],E=[{x:5,y:5}];function k(t,n){var e=n.x,r=n.y;return!(!t.elements[e]||!t.elements[e][r])&&(i.a.set(t.elements[e][r],"hit",!0),!0)}var G={namespaced:!0,state:function(){return{elements:(t=10,g.a.range(0,t).map(function(n){return g.a.range(0,t).map(function(t){return{x:n,y:t}})})),shipsOnDesk:[_,b,A,E].map(function(t){return{parts:t.map(function(t){return x()({},t,{id:Math.random().toFixed(5)})}),id:Math.random().toFixed(5)}}).reduce(function(t,n){return t[n.id]=n,t},{})};var t},mutations:{mark:k,hit:k},actions:{init:function(t){var n=t.getters,e=t.state;n.shipsArray.forEach(function(t){t.parts.forEach(function(n){e.elements[n.x][n.y].ship=t.id})})}},getters:{shipsAvailable:function(t,n){return n.shipsArray.filter(function(t){return n.isShipActive(t.id)}).length},shipsArray:function(t){return g.a.toArray(t.shipsOnDesk)},isShipActive:function(t){return function(n){return!!t.shipsOnDesk[n].parts.find(function(n){return!t.elements[n.x][n.y].hit})}},isCellEmpty:function(t){return function(n,e){return!t.elements[n][e].hit}}}};function w(t){var n=t.namespace;return function(t){var e=function(){return t.state[n]};t.subscribe(function(i){var r,s,a,o=i.type,c=i.payload;if(o===n+"/hit"){var u=e(),p=(s=(r=c).x,a=r.y,e().elements[s][a]);if(p.hit&&p.ship&&!t.getters[n+"/isShipActive"](p.ship)){var d={},h=[1,0,-1];u.shipsOnDesk[p.ship].parts.forEach(function(e){var i=e.x,r=e.y;h.forEach(function(e){h.forEach(function(s){var a=i+e,o=r+s,c=[a,o];e===s&&0===s||g.a.get(d,c)||(g.a.set(d,c,!0),t.commit(n+"/mark",{x:a,y:o}))})})})}}})}}function $(t,n){var e=g.a.get(t,"actions.init",g.a.noop),i=[];return function t(n,e,i){l()(n.modules||{}).forEach(function(r){var s=e?e+"/"+r:r;i.push(s),t(n.modules[r],s,i)})}(t,n,i),g.a.set(t,"actions.init",function(t){e(t),i.forEach(function(n){t.dispatch(n+"/init")})}),t}var F=function(){i.a.use(m.a);var t=new m.a.Store($({state:{currentTurn:"grid"},modules:{grid:G,opponentGrid:G},mutations:{restart:function(t){t.grid=G.state(),t.opponentGrid=G.state()},toggleTurn:function(t){t.currentTurn="grid"===t.currentTurn?"opponentGrid":"grid"}},actions:{restart:function(t){var n=t.dispatch;(0,t.commit)("restart"),n("init")},hit:function(t,n){var e=t.state,i=t.commit,r=n.namespace,s=n.cell,a=e[""+r].elements[s.x][s.y],o=a.hit;i(r+"/hit",s),o===a.hit||a.ship||i("toggleTurn")}},plugins:[function(t){return t.dispatch("init",{store:t})},w({namespace:"grid"}),w({namespace:"opponentGrid"})],strict:!1}));return window.store=t,t}();i.a.config.productionTip=!1,new i.a({el:"#app",router:h,store:F,components:{App:s},template:"<App/>"})},p9Ff:function(t,n){},sbcC:function(t,n){}},["NHnr"]);
//# sourceMappingURL=app.08cc7602c00f10e017a9.js.map